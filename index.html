<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OliXMusic</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<header>
    <div class="header-container">
        <h1>OliXMusic</h1>
    </div>
</header>

<main>
    <!-- Add the search input field -->
    <input type="text" id="searchInput" oninput="searchSongs()" placeholder="Search for a song">

    <div class="song-container">
        <div class="song-list" id="songList"></div>
    </div>

    <div class="audio-container">
        <audio controls id="audioPlayer" onplay="updateNowPlaying()" onended="playNext()">
            Your browser does not support the audio element.
        </audio>
        <button class="shuffle-button" onclick="toggleShuffle()">Shuffle</button>
        <button class="previous-button" onclick="playPrevious()">Previous</button>
        <button class="next-button" onclick="playNext()">Next</button>
    </div>

    <div class="now-playing" id="nowPlaying">
        <strong>Now Playing:</strong> <span id="currentSong">Nothing</span>
    </div>
</main>

<script>
    // Sample song data with images
    const songs = [
        { title: 'Godzilla (feat. Juice WRLD)', artist: 'Eminem, Juice WRLD', image: 'EminemGodzilla.png', source: 'EminemGodzilla.mp3' },
        { title: 'Lovin On Me', artist: 'Jack Harlow', image: 'LovinOnMe.png', source: 'LovinOnMe.mp3' },
        { title: 'Wat U Want 2 (prod. SKY)', artist: 'Yeat', image: 'WatUWant2.png', source: 'WatUWant2.mp3' },
        { title: 'sdp interlude (Extended)', artist: 'Travis Scott', image: 'sdpinterlude(Extended).png', source: 'sdpinterlude(Extended).mp3' },
        { title: 'ICEWHORE!', artist: 'Lumi Athena', image: 'ICEWHORE!.png', source: 'ICEWHORE!.mp3' },
        { title: 'Skyfall', artist: 'Adele', image: 'Skyfall.png', source: 'Skyfall.mp3' },
        { title: 'Goofy Music', artist: 'Aaron, Mantas', image: 'goofymusic.png', source: 'goofymusic.mp3' },
        { title: 'Skibidi Toilet (Sped Up)', artist: 'Lil Big Stack', image: 'SkibidiToiletSpedUp.png', source: 'SkibidiToiletSpedUp.mp3' },
        // Add more songs as needed
    ];

    let filteredSongs = [...songs]; // Initialize filteredSongs with all songs

    const songList = document.getElementById('songList');
    const audioPlayer = document.getElementById('audioPlayer');
    const nowPlaying = document.getElementById('nowPlaying');
    const currentSong = document.getElementById('currentSong');
    const shuffleButton = document.querySelector('.shuffle-button');
    const nextButton = document.querySelector('.next-button');
    const previousButton = document.querySelector('.previous-button');
    let currentSongIndex = 0;
    let isShuffleMode = false;
    let shuffledIndexes = [];

    // Function to display a list of songs
    function displaySongs(songsToDisplay) {
        songList.innerHTML = ''; // Clear the song list
        songsToDisplay.forEach((song, index) => {
            const songItem = document.createElement('div');
            songItem.classList.add('song-item');
            songItem.innerHTML = `
                <div class="song-info">
                    <div class="song-image-container">
                        <img src="${song.image}" alt="${song.title} Cover" class="song-image">
                        <button class="play-button" onclick="playSong(${index})">&#9654;</button>
                    </div>
                    <div class="song-details">
                        <span class="song-title">${song.title}</span>
                        <span class="song-artist">${song.artist}</span>
                    </div>
                </div>`;
            songList.appendChild(songItem);
        });
    }

    // Function to play a specific song
    function playSong(index) {
        // Find the index in the original list based on the filtered list
        const originalIndex = songs.findIndex(song => song === filteredSongs[index]);

        // Set the current song index and play the song
        currentSongIndex = originalIndex;
        audioPlayer.src = songs[currentSongIndex].source;
        audioPlayer.play();
        updateNowPlaying();
    }

    // Function to update the Now Playing section
    function updateNowPlaying() {
        const currentSongTitle = audioPlayer.src ? getCurrentSongTitle() : 'Nothing';
        currentSong.textContent = currentSongTitle;
    }

    // Function to get the title of the currently playing song
    function getCurrentSongTitle() {
        const currentSource = audioPlayer.src;
        for (const song of songs) {
            if (currentSource.includes(song.source)) {
                return `${song.title} - ${song.artist}`;
            }
        }
        return 'Nothing';
    }

    // Function to play the next song
    function playNext() {
        if (isShuffleMode) {
            playShuffledNext();
        } else {
            currentSongIndex = (currentSongIndex + 1) % songs.length;
        }
        playSong(currentSongIndex);
    }

    // Function to play the previous song
    function playPrevious() {
        if (isShuffleMode) {
            playShuffledPrevious();
        } else {
            currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length;
        }
        playSong(currentSongIndex);
    }

    // Function to shuffle the songs
    function shuffleSongs() {
        const tempIndexes = Array.from({ length: songs.length }, (_, index) => index);
        shuffledIndexes = [];

        while (tempIndexes.length > 0) {
            const randomIndex = Math.floor(Math.random() * tempIndexes.length);
            const removedIndex = tempIndexes.splice(randomIndex, 1)[0];

            // Avoid shuffling the same song that just ended
            if (removedIndex !== currentSongIndex) {
                shuffledIndexes.push(removedIndex);
            }
        }
    }

    // Function to play the next song in shuffle mode
    function playShuffledNext() {
        if (shuffledIndexes.length === 0) {
            shuffleSongs();
        }
        currentSongIndex = shuffledIndexes.shift();
        playSong(currentSongIndex);
    }

    // Function to play the previous song in shuffle mode
    function playShuffledPrevious() {
        if (shuffledIndexes.length === 0) {
            shuffleSongs();
        }
        currentSongIndex = shuffledIndexes.pop();
        playSong(currentSongIndex);
    }

    // Function to toggle shuffle mode
    function toggleShuffle() {
        isShuffleMode = !isShuffleMode;
        shuffleButton.classList.toggle('active', isShuffleMode);
        if (isShuffleMode) {
            shuffleSongs();
        }
    }

    // Function to filter and display songs based on the search query
    function searchSongs() {
        const searchInput = document.getElementById('searchInput').value.toLowerCase();
        filteredSongs = songs.filter(song =>
            song.title.toLowerCase().includes(searchInput) || song.artist.toLowerCase().includes(searchInput)
        );

        // Display the filtered songs
        displaySongs(filteredSongs);
    }

    // Initial display of songs
    displaySongs(songs);

</script>

</body>
</html>
